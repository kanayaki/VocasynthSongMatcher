# VocasynthSongMatcher

Бот для подбора вокалоидных песен (с сайта vocadb), которые могут понравиться пользователю, по заданному им запросу.

# Как бот должен работать?

1. С помощью API с сайта `https://vocadb.net/` предварительно собирается информация с 1000 самых популярных песен. Достаются текст песни на английском языке и метаинформация для дальнейшей возможности фильтрации (вокалисты и тип вокалиста, язык оригинала песни). Фильтрация производится с помощью кнопок в боте.
2. Тексты песен предварительно токенизируются и лемматизируются.
3. С помощью word2vec предварительно считаются векторные похожести между словами в песнях и словарем из модели. Это нужно для того, чтобы экономилось время работы и память бота во время запроса пользователя. 
4. Когда пользователь дает запрос, он лемматизируется, и бот по таблице получает векторные схожести между словами запроса и словами песни. Для каждого слова в запросе пользователя ищется ближайшее слово из текста песни, все близости суммируются, и получается число, которое отображает насколько текст песни близок к запросу. Это число считается для всех текстов, выбирается 5 наилучших, и эти песни выводятся пользователю.

На данный момент выполнены 1-3 пункты плана и есть заготовка для бота, выложенная на хостинг pythonanywhere.

# Описание структуры проекта:

`main.py` - код бота

В данный момент бот умеет отвечать на команду `/start`

Бот выложен на хостинг pythonanywhere по ссылке:
`https://www.pythonanywhere.com/user/kkkkkkklkkkkkkkkkkkkkkqqqqqqql/shares/976841b356c04fd49ec5567c5e8bc828/`

(BOTTOKEN находится в файле `.env`, которым я не делюсь по причинам безопасности, он тоже хостится вместе с ботом)

Юзернейм бота в телеграме:
`@VocasynthSongMatcherBot`


`creating_csv.ipynb` - тетрадка, в которой создается изначальный csv

В ней используется API сайта `https://vocadb.net/` для того, чтобы собрать информацию о песнях и достать их тексты на английском языке


`processing_csv_lyrics.ipynb` - тетрадка, в которой происходит обработка созданного csv файла

В ней тексты песен токенизируются и лемматизируются, а также вытягиваются уникальные слова 


`new_out1.csv` - csv, получившаяся в результате запуска кода в двух тетрадках

В ней содержатся id песни, токенизированный и лемматизированный текст песни на английском языке, язык оригинала песни и информация о вокалистах


`unique_words.txt` - txt файл с уникальными словами


`processing_gensim.ipynb` - тетрадка, в которой происходит работа с моделью

В ней с помощью предобученной модели w2v (в которой есть словарь английских слов) создается csv векторных схожестей между уникальными словами в песнях и словарем из модели

Ссылка на модель:
`https://drive.google.com/file/d/0B7XkCwpI5KDYNlNUTTlSS21pQmM/edit?resourcekey=0-wjGZdNAUop6WykTtMip30g`


`similarities.csv` - csv с векторными схожестями
Выложен по ссылке `https://drive.google.com/file/d/1ghBWIU8V6qjq1N-qEfuv1JNpjgPMUhZZ/view?usp=sharing` по причине большого веса файла
